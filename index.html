<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XRPL Playground</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ğŸ® XRPL Playground</h1>
        <p>Build XRPL transactions visually with a Scratch-like interface</p>
    </header>

    <main class="container">
        <!-- Top Panel: Network & Accounts -->
        <section class="settings-panel">
            <div class="settings-grid">
                <!-- Network Selector -->
                <div class="settings-box">
                    <h3>ğŸŒ Network</h3>
                    <select id="network-select" class="full-width-select">
                        <option value="mainnet">Mainnet</option>
                        <option value="testnet" selected>Testnet</option>
                        <option value="devnet">Devnet</option>
                    </select>
                    <p class="network-info" id="network-info">Connected to Testnet</p>
                </div>

                <!-- Account Management -->
                <div class="settings-box">
                    <h3>ğŸ‘¤ Accounts</h3>
                    <div class="account-actions">
                        <button id="add-account-btn" class="btn btn-secondary btn-sm">+ Add Account</button>
                        <button id="generate-account-btn" class="btn btn-primary btn-sm">ğŸ”‘ Generate</button>
                    </div>
                    <div id="accounts-list" class="accounts-list"></div>
                </div>
            </div>
        </section>

        <!-- Left Panel: Block Palette -->
        <aside class="palette-panel">
            <h2>Block Palette</h2>

            <div id="transaction-type-section" class="palette-section">
                <h3 class="palette-category">1. Select Transaction Type</h3>
                <input type="text" id="tx-type-search" placeholder="Search transaction types..." class="search-input" />
                <div id="transaction-types-palette" class="palette-blocks scrollable">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <div id="fields-section" class="fields-section" style="display: none;">
                <h3 class="palette-category">2. Add Fields</h3>
                <p class="helper-text">Drag fields to the workspace</p>
                <div id="available-fields-container"></div>
            </div>

        </aside>

        <!-- Center Panel: Workspace -->
        <section class="workspace-panel">
            <div class="workspace-header">
                <div>
                    <h2>Workspace</h2>
                    <div id="current-test-label" class="current-test-label">Editing: Test 1</div>
                </div>
                <div class="workspace-controls">
                    <button id="show-json-btn" class="btn btn-secondary">ğŸ“„ Show JSON</button>
                    <button id="add-test-btn" class="btn btn-success">â• Add Test</button>
                    <button id="run-current-test-btn" class="btn btn-primary">â–¶ï¸ Run This Test</button>
                    <button id="run-all-tests-btn" class="btn btn-primary">â–¶ï¸ Run All Tests</button>
                    <button id="clear-workspace" class="btn btn-secondary">ğŸ—‘ï¸ Clear</button>
                    <select id="example-selector" class="btn btn-secondary">
                        <option value="">Load Example...</option>
                        <option value="payment">Payment</option>
                        <option value="trustset">TrustSet</option>
                        <option value="accountset">AccountSet</option>
                        <option value="offercreate">OfferCreate</option>
                    </select>
                </div>
            </div>
            <div id="workspace" class="workspace">
                <div class="workspace-placeholder">
                    <p>ğŸ‘† Drag blocks here to build your transaction</p>
                    <p class="hint">Start with a Transaction Type block</p>
                </div>
            </div>

        </section>

        <!-- Right Panel: Test Queue -->
        <aside class="test-queue-panel">
            <h2>Test Queue</h2>
            <div id="test-queue-right" class="test-queue">
                <!-- Test items will be rendered here -->
            </div>
        </aside>
    </main>

    <footer>
        <p>Built for XRPL â€¢ Data from <code>definitions.json</code></p>
        <p style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.8;">
            Shortcuts: <kbd>Ctrl+K</kbd> Clear â€¢ <kbd>Ctrl+S</kbd> Download â€¢ <kbd>Esc</kbd> Dismiss messages
        </p>
    </footer>

    <!-- JSON Modal -->
    <div id="json-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Transaction JSON</h2>
                <button id="close-json-modal" class="modal-close">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="json-modal-controls">
                    <button id="copy-json" class="btn btn-primary">ğŸ“‹ Copy</button>
                    <button id="download-json" class="btn btn-primary">ğŸ’¾ Download</button>
                </div>
                <pre id="json-output" class="json-output"></pre>
                <div id="validation-messages" class="validation-messages">
                    <!-- Validation messages appear here (in modal only) -->
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="https://unpkg.com/xrpl@3.0.0/build/xrpl-latest-min.js"></script>
    <script src="app.js"></script>
</body>
</html>

